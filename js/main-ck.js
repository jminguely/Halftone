grid={canvas:"",listDots:[],widthGrid:"",heightGrid:"",radiusDots:10,marginDots:1,cols:0,rows:0,init:function(){grid.canvas=SVG("grid");this.updateGrid()},componentToHex:function(e){var t=e.toString(16);return t.length==1?"0"+t:t},rgbToHex:function(e,t,n){return"#"+grid.componentToHex(e)+grid.componentToHex(t)+grid.componentToHex(n)},cleanGrid:function(){grid.canvas.clear();this.listDots=[]},updateGrid:function(){this.cleanGrid();this.widthGrid=$("svg#grid").width();this.heightGrid=$("svg#grid").height();this.cols=Math.ceil(this.widthGrid/(this.radiusDots+this.marginDots));this.rows=Math.ceil(this.heightGrid/(this.radiusDots+this.marginDots));for(var e=0;e<this.cols;e++){this.listDots[e]=[];for(var t=0;t<this.rows;t++){this.listDots[e][t];this.listDots[e][t]=grid.canvas.circle(this.radiusDots,this.radiusDots).move(this.marginDots/2+e*(this.radiusDots+this.marginDots+2),this.marginDots/2+t*(this.radiusDots+this.marginDots)).fill("blue")}}grid.loadImage()},getLuminosity:function(e,t,n,r){r=Math.pow;return.2126*r(e/255,2.2)+.7152*r(t/255,2.2)+.0722*r(n/255,2.2)},loadImage:function(e){var t=document.getElementById("canvas"),n=t.getContext("2d"),r=new Image;r.onload=function(){var e=t.height/r.height;n.drawImage(r,0,0,r.width,r.height,t.width/2-r.width*e/2,t.height/2-r.height*e/2,r.width*e,r.height*e);var i=n.getImageData(0,0,t.width,t.height);for(var s=0;s<grid.cols;s++)for(var o=0;o<grid.rows;o++){var u=Math.floor(t.width/grid.cols*s),a=Math.floor(t.height/grid.rows*o),f=4*(u+a*t.width),l=i.data[f],c=i.data[f+1],h=i.data[f+2],p=i.data[f+3],d=grid.rgbToHex(l,c,h);grid.listDots[s][o].animate().fill(d)}};r.src=e}};$(document).ready(function(){grid.init();$(window).resize(function(){});grid.loadImage()});